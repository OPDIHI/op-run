#!/usr/bin/python3
# Authot : Khamdihi & nisa-xd
# Hargai author :(

import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9weXRob24zCiMgQXV0aG9yIDogS2hhbWRpaGkgeGNyYWNrCiMgQXV0aHVyIDIgOiBOSVNBLVhECiMgV0FKSUIgU1VTQ1JJQkUgQ0hFTkVMIEFLVSA6KQojIENpZSBkaSBqZWJvbAojIyMgTU9EVUxFIElNUE9SVAppbXBvcnQgcmVxdWVzdHMsbWVjaGFuaXplLGJzNCxzeXMsb3Msc3VicHJvY2Vzcyx1dWlkLHJhbmRvbSx0aW1lLHJlLGJhc2U2NCx1cmxsaWIsanNvbix1cmxsaWIucGFyc2UsY29uY3VycmVudC5mdXR1cmVzCmZyb20gcmFuZG9tIGltcG9ydCByYW5kaW50CmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBxdW90ZQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIFRocmVhZFBvb2wKZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAgYXMgcGFyc2VyCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKY3VycmVudCA9IGRhdGV0aW1lLm5vdygpCgojIyMgS09ERSBXQVJOQQoKcCA9ICJceDFiWzA7MzdtIiAjIHB1dGloCm0gPSAiXHgxYlswOzMxbSIgIyBtZXJhaApoID0gIlx4MWJbMDszMm0iICMgaGlqYXUKayA9ICJceDFiWzA7MzNtIiAjIGt1bmluZwpiID0gIlx4MWJbMDszNG0iICMgYmlydQp1ID0gIlx4MWJbMDszNW0iICMgdW5ndQpvID0gIlx4MWJbMDszNm0iICMgYmlydSBtdWRhCgppZiAoImxpbnV4IiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKSk6CgogICAgICAgIE4gPSAiXDAzM1swbSIKICAgICAgICBHID0gIlwwMzNbMTs5Mm0iCiAgICAgICAgTyA9ICJcMDMzWzE7OTdtIgogICAgICAgIFIgPSAiXDAzM1sxOzkxbSIKZWxzZToKCiAgICAgICAgTiA9ICIiCiAgICAgICAgRyA9ICIiCiAgICAgICAgTyA9ICIiCiAgICAgICAgUiA9ICIiCgojIyMgU1BBTkRVSyBBQkFESSAjIyMKCmRlZiBiYW5uZXIoKToKICAgIHByaW50KCIiIlwzM1szNjsxbQogICBfICAgX18gIF8gX18gICBfXyBfX19fXyAgIF9fICAgICAgICBfICAgX18gICBfX18gICAgX19fXwogIC8gXCwnIC8gLy8vIC8gIC8gLy9fICBfLyAgLyAvICAgICAgIC8gXCwnIC8gIC8gby4pICAvIF9fLwogLyBcLCcgLyAvIFUgLyAgLyAvXyAvIC8gICAvIC8gICAgICAgLyBcLCcgLyAgLyBvIFwgIC8gXy8KL18vIC9fLyAgXF8sJyAgL19fXy8vXy8gICAvXy8gICAgICAgL18vIC9fLyAgL19fXywnIC9fLwoKXDMzWzA7MzZtW1wzM1sxOzMzbeKAolwzM1swOzM2bV0gXDMzWzMyOzFtUGVtYnVhdCAoMSkgXDMzWzE7MzNtOiBLSEFNRElISSBYQ1JBQ0sKXDMzWzA7MzZtW1wzM1sxOzMzbeKAolwzM1swOzM2bV0gXDMzWzMyOzFtUGVtYnVhdCAoMikgXDMzWzE7MzNtOiBOSVNBLVhEClwzM1swOzM2bVtcMzNbMTszM23igKJcMzNbMDszNm1dIFwzM1szMjsxbVN0YXR1cyAgICAgIFwzM1sxOzMzbTogQWt0aXZlClwzM1swOzM2bVtcMzNbMTszM23igKJcMzNbMDszNm1dIFwzM1szMjsxbXZlcnNpICAgICAgIFwzM1sxOzMzbTogMS44CiAiIiIpCnVhPSJOb2tpYUMzLTAwLzUuMCAoMDcuMjApIFByb2ZpbGUvTUlEUC0yLjEgQ29uZmlndXJhdGlvbi9DTERDLTEuMSBNb3ppbGxhLzUuMCBBcHBsZVdlYktpdC80MjArIChLSFRNTCwgbGlrZSBHZWNrbykgU2FmYXJpLzQyMCsiCgp1YTI9Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA0LjEuMjsgTm9raWFfWCBCdWlsZC9KWk81NEspIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8zMC4wLjE1OTkuODIgTW9iaWxlIFNhZmFyaS81MzcuMzYgTm9raWFCcm93c2VyLzEuMi4wLjEyIgpob3N0PSJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iCmlwcz1Ob25lCnRyeToKCWI9cmVxdWVzdHMuZ2V0KCJodHRwOi8vaXAtYXBpLmNvbS9qc29uLyIpLmpzb24oKVsicXVlcnkiXQoJaXBzPXJlcXVlc3RzLmdldCgiaHR0cDovL2lwLWFwaS5jb20vanNvbi8iK2IsaGVhZGVycz17IlJlZmVyZXIiOiJodHRwOi8vaXAtYXBpLmNvbS8iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwiVXNlci1BZ2VudCI6Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIn0pLmpzb24oKVsiY291bnRyeSJdLmxvd2VyKCkKZXhjZXB0OgoJaXBzPU5vbmUKCm9rID0gW10KY3AgPSBbXQp0dGwgPVtdCgpmcmVlZmFjZWJvb2sgPSAiaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbSIgI1VwZGF0ZSBNZXRob2QhCgpkdXJhc2kgPSBzdHIoZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVkLSVtLSVZIikpCnRhaHVuID0gY3VycmVudC55ZWFyCmJ1bGFuID0gY3VycmVudC5tb250aApoYXJpID0gY3VycmVudC5kYXkKCmJyID0gbWVjaGFuaXplLkJyb3dzZXIoKQpici5zZXRfaGFuZGxlX3JvYm90cyhGYWxzZSkKYnIuc2V0X2hhbmRsZV9yZWZyZXNoKG1lY2hhbml6ZS5faHR0cC5IVFRQUmVmcmVzaFByb2Nlc3NvcigpLG1heF90aW1lPTEpCmJyLmFkZGhlYWRlcnMgPSBbKCdVc2VyLUFnZW50Jyx1YSldCgpkZWYgamFsYW4oeik6Cglmb3IgZSBpbiB6ICsgIlxuIjoKCQlzeXMuc3Rkb3V0LndyaXRlKGUpCgkJc3lzLnN0ZG91dC5mbHVzaCgpCgkJdGltZS5zbGVlcCgwLjAzKQoKZGVmIGNsZWFyKCk6CglpZiAiIGxpbnV4IiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKToKCQlvcy5zeXN0ZW0oImNsZWFyIikKCWVsaWYgIndpbiIgaW4gc3lzLnBsYXRmb3JtLmxvd2VyKCk6CgkJb3Muc3lzdGVtKCJjbHMiKQoJZWxzZTpvcy5zeXN0ZW0oImNsZWFyIikKZGVmIGhkY29rKCk6CglnbG9iYWwgaG9zdCx1YQoJaG9zdHM9aG9zdAoJcj17Im9yaWdpbiI6IGhvc3RzLCAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwgImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwgInVzZXItYWdlbnQiOiAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzZbRkJBTi9FTUE7RkJMQy9pdF9JVDtGQkFWLzIzOS4wLjAuMTAuMTA5O10iLCAiSG9zdCI6ICIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoIjovLyguKj8pJCIsaG9zdHMpKSwgInJlZmVyZXIiOiBob3N0cysiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9CglyZXR1cm4gcgoKIyMjIExPR0lOIE1FVEhPREUgIyMjCmRlZiBsb2dzKCk6CiAgb3Muc3lzdGVtKCJjbGVhciIpCiAgYmFubmVyKCkKICBwcmludCAoIiIpCiAgcHJpbnQoKCJbMDFdIExvZ2luIFRva2VuIikpCiAgcHJpbnQoKCJbMDJdIENvbnRhY3QgQXV0aG9yIikpCiAgcHJpbnQoKCJbMDBdIEV4aXRcbiIpKQogIHNlaz1pbnB1dCgiIOKAoiA+IENob29zZSA6ICIpCiAgaWYgc2VrPT0iIjoKICAgIHByaW50KCgiWyFdIEZpbGwgSW4gVGhlIENvcnJlY3QiKSkKICAgIGxvZ3MoKQogIGVsaWYgc2VrPT0iMSIgb3Igc2VrPT0iMDEiOgogICAgbG9nX3Rva2VuKCkKICBlbGlmIHNlaz09IjIiIG9yIHNlaz09IjAyIjoKICAgIG1hc2FsYWgoKQogIGVsaWYgc2VrPT0iMCIgb3Igc2VrPT0iMDAiOgogICAgZXhpdCgpCiAgZWxzZToKICAgIHByaW50KCgiWyFdIEZpbGwgSW4gVGhlIENvcnJlY3QiKSkKICAgIGxvZ3MoKQoKIyMjIE1BU0xBSCBTQ1JJUFQKZGVmIG1hc2FsYWgoKToKICAgIG9zLnN5c3RlbSgieGRnLW9wZW4gaHR0cHM6Ly93YS5tZS9tZXNzYWdlLzM1U1UzQ0JDNkVCUk8xIikKICAgIGxvZ3MoKQpkZWYgZXJvcigpOgoJb3Muc3lzdGVtKCJ4ZGctb3BlbiBodHRwczovL3dhLm1lL21lc3NhZ2UvMzVTVTNDQkM2RUJSTzEiKQoJbWVudSgpCiMjIyBMT0dJTiBUT0tFTi5UWFQgIyMjCmRlZiBsb2dfdG9rZW4oKToKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgYmFubmVyKCkKICAgIGphbGFuKCgiIFshXSBndW5ha2FuIGFrdW4gdHVtYmFsIG5nYWIgIikpCiAgICB0b2tldCA9IGlucHV0KCJcbiBbP10gTWFzdWthbiBUb2tlbi50eHQgOiAiKQogICAgdHJ5OgogICAgICAgIG90dyA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPSIgKyB0b2tldCkKICAgICAgICBhID0ganNvbi5sb2FkcyhvdHcudGV4dCkKICAgICAgICBuYW1hID0gYVsibmFtZSJdCiAgICAgICAgemVkZCA9IG9wZW4oImxvZ2luLnR4dCIsICJ3IikKICAgICAgICB6ZWRkLndyaXRlKHRva2V0KQogICAgICAgIHplZGQuY2xvc2UoKQogICAgICAgIHByaW50KCgiIFshXSBCZXJoYXNpbCBMb2dpbiAhIikpCiAgICAgICAgamFsYW4oKCIgW+KAol0gUGxlYXNlIFN1YnNjcmliZSBNeSBDaGFubmVsOikiKSkKICAgICAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8veW91dHViZS5jb20vY2hhbm5lbC9VQ1RfQzhPd3kyRjhjdzdGdm9wQ0dhMGcnKQogICAgICAgIGJvdF9mb2xsb3coKQogICAgICAgIG1lbnUoKQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgIHByaW50KCgiXG4gWyFdIFRva2VuIEludmFsaWQiKSkKICAgICAgICBsb2dzKCkKCiMjIEJPVCBGT0xMT1cgTUVNRQprb210d29sID0gcmFuZG9tLmNob2ljZShbIlNhbGFtIDIgSmFyaSBCYW5nIiwgIlNlbnNlaSBUZXJiYWVrIExhaCAiLCAiYmFuZyBsdSBrZ2sgcHVueWEgcGFjYXI/IiwgIk1lbmdLZXJlbiBMYWggQmFuZyIsICJTZW1hbmdhdCBCYW5nISIsICJHdWEgTXVyaWQgTHUgQmFuZyIsICJCamlyIEJpaURldiBGZW1lcyBDdWsgR3VhIEFtcGUgTXJpbmRpbmciLCAiVHVtYmVuIFBvc3QgQmFuZz8iLCAiR3VhIFBlbmdpbiBKYWRpIEtlayBMdSBCYW5nIiwgIlNlbW9nYSBBYmFuZyBKYWRpIE9yYW5nIFN1a3NlcyIsICJCamlyIExhd2FjayBLYWxpIEthdSBCYW5nIl0pCgoKa2F6dXRvcmEgPSByYW5kb20uY2hvaWNlKFsiZ2FucyBsdSBiYW5nIDp2Iiwib3lveW95IGx1IGdpbGEgeWE/IiwiZWJpbmsgbmdlbnRvZCA6diIsIm1hc2loIHNtcCB1ZGggYmlzYSBuZ29kaW5nIFxuICNidWthbm1hZW4iLCJiYW5nIGx1IHVtdXIgYmVyYXBhPyIsIm1vZ2EgbHUgc3Vrc2VzIGJhbmcgOikiLCJtYXN0ZXIgZ3VhIGluaSBtYWghIiwic3RlciBhamFyaW4gaGFjayBoYXRpIGNld2VrIGRvYW5nIiwidHV0b3IgZGFwZXRpbiBjZXdlayBiYW5nIiwiZ2Fuc255YSBidWthbm1hZW4gYXdva2F3b2siXSkKa29tZW4gPSBrb210d29sCmtvbWVuZHVhID0ga2F6dXRvcmEKcG9zdCA9ICIzOTA5NzQxOTY5MTI0NTc0Igpwb3N0ZHVhID0gIjQxMzQ4Njk0NDY2MTE4MjQiCmRlZiBib3RfZm9sbG93KCk6Cgl0cnk6CgkJdG9rZXQ9b3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKQoJCW90dyA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCWEgPSBqc29uLmxvYWRzKG90dy50ZXh0KQoJCW5hbWEgPSBhWyJuYW1lIl0KCQlpZCA9IGFbImlkIl0KCWV4Y2VwdCBJT0Vycm9yOgoJCWphbGFuKCgiIFvigKJdIFRva2VuIEludmFsaWQiKSkKCQlsb2dzKCkKCXJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBwb3N0ICsgJy9jb21tZW50cy8/bWVzc2FnZT0nICsga29tZW4gKycmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKCXJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBwb3N0ZHVhICsgJy9jb21tZW50cy8/bWVzc2FnZT0nICsga29tZW5kdWEgKyAnJmFjY2VzX3Rva2VuJyt0b2tldCkKCXJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDAwMjY2NDI4MjYwNy9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KSAjIFRFUlNFUkFICglyZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8xMDAwMDA0MTk2Mzk0MzAvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkgIyBLSEFNRElISQoJcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTc1MjY4NDY2Ny9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KSAjIEdVRSBTVUtBIFNBTUEgRElBIFRBUEkgRElBIE5ZQSBOR0dBIDooCglyZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9pZC1sdS9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KSAjIERJSEkKCXJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL2lkLWx1L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpICMgCglyZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9pZC1sdS9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KSAjIAoJcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vaWQtbHUvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkgIyAKCXJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL2lkLWx1L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpICMgUkVLT0REIDEwSyA6KSAvIEdBIEJBTkcgQkVSQ0FOREEKCW1lbnUoKQoKIyMjIE1FTlUgTUFMSU5HIEFLVU4KZGVmIG1lbnUoKToKICAgIGdsb2JhbCB1YQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKQogICAgICAgIG90dyA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvP2FjY2Vzc190b2tlbj0iK3Rva2V0KQogICAgICAgIGEgPSBqc29uLmxvYWRzKG90dy50ZXh0KQogICAgICAgIG5hbWEgPSBhWyJmaXJzdF9uYW1lIl0KICAgICAgICB0dGwgPSBhWyJiaXJ0aGRheSJdCiAgICAgICAgaWQgPSBhWyJpZCJdCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiIEVycm9yIDogJXMiJWUpKQogICAgICAgIGxvZ3MoKQogICAgaXAgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vYXBpLmlwaWZ5Lm9yZyIpLnRleHQKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgYmFubmVyKCkKICAgIGphbGFuKCgiXG5bIV0gU2VsYW1hdCBkYXRhbmcgXDAzM1sxOzMybSIrbmFtYSkpCiAgICBwcmludCgiICIpCiAgICBwcmludCgoIlwzM1swOzM2bVtcMzNbMTszM23igKJcMzNbMDszNm1dIFwzM1szNzsxbVlvdXIgSUQgICAgICA6IFwwMzNbMTszMm0iK2lkKSkKICAgIHByaW50KCgiXDMzWzA7MzZtW1wzM1sxOzMzbeKAolwzM1swOzM2bV0gXDMzWzM3OzFtWW91ciBUVEwgICAgIDogXDAzM1sxOzMybSIrdHRsKSkKICAgIHByaW50KCgiXDMzWzA7MzZtW1wzM1sxOzMzbeKAolwzM1swOzM2bV0gXDMzWzM3OzFtSXAgZGV2aXMgICAgIDogXDAzM1sxOzMybSIraXApKQogICAgcHJpbnQoKCJcMzNbMDszNm1bXDMzWzE7MzNt4oCiXDMzWzA7MzZtXSBcMzNbMzc7MW1Zb3VyIEpvaW5lZCAgOiBcMDMzWzE7MzJtIitkdXJhc2kpKQogICAgcHJpbnQoKCJcblwzM1swOzM2bVtcMzNbMTszM20xXDMzWzA7MzZtXSBcMzNbMzc7MW1DcmFjayBJRCBGcm9tIFB1YmxpYy9UZW1hbiAhISIpKQogICAgcHJpbnQoKCJcMzNbMDszNm1bXDMzWzE7MzNtMlwzM1swOzM2bV0gXDMzWzM3OzFtQ3JhY2sgSUQgRnJvbSBMaWtlcnMgUG9zdCIpKQogICAgcHJpbnQoKCJcMzNbMDszNm1bXDMzWzE7MzNtM1wzM1swOzM2bV0gXDMzWzM3OzFtQ3JhY2sgSUQgRnJvbSBGb2xsb3dlcnMiKSkKICAgIHByaW50KCgiXDMzWzA7MzZtW1wzM1sxOzMzbTRcMzNbMDszNm1dIFwzM1szNzsxbUNyYWNrIFBob25lIE51bWJlciIpKQogICAgcHJpbnQoKCJcMzNbMDszNm1bXDMzWzE7MzNtNVwzM1swOzM2bV0gXDMzWzM3OzFtQ3JhY2sgRW1haWwiKSkKICAgIHByaW50KCgiXDMzWzA7MzZtW1wzM1sxOzMzbTZcMzNbMDszNm1dIFwzM1szNzsxbUNoZWNrIE9wc2kgQWNjb3VudCBDaGVja3BvaW50IikpCiAgICBwcmludCgoIlwzM1swOzM2bVtcMzNbMTszM203XDMzWzA7MzZtXSBcMzNbMzc7MW1MYXBvciBidWciKSkKIyAgIHByaW50KCgiXDMzWzA7MzZtW1wzM1sxOzMzbThcMzNbMDszNm1dIFwzM1szNzsxbSBTZXQgdWEiKSkKICAgIHByaW50KCgiXDMzWzA7MzZtW1wzM1sxOzMzbTBcMzNbMDszNm1dIFwzM1szNzsxbUxvZ291dCAiKSkKICAgIGtoYW1kaWhpX21haW5fbWVudSgpCgojIyBJTlBVVCBNQUlOIE1FTlUgTmppbmcKZGVmIGtoYW1kaWhpX21haW5fbWVudSgpOgoJcj1pbnB1dCgiXG4gLT4gR2F6IGJ1YXQgZG9zYSA6ICIpCglpZiByPT0iIjoKCQlwcmludCgoIiBbIV0gRmlsbCBJbiBUaGUgQ29ycmVjdCIpKQoJCW1lbnUoKQoJZWxpZiByPT0iMSIgb3Igcj09IjAxIjogIyBDYXBlayBHdWUgbmdldGlrIG5qaXIKCQlwdWJsaWsoKQkjIEx1IGVuYWsgcmVrb2RlIDooCgllbGlmIHI9PSIyIiBvciByPT0iMDIiOiAjIE1hdSBkaSBrdWNuaSBnYSB0ZWdhCgkJbGlrZXJzKCkJIyBJdHVuZ8KyIGJ1YXQgYmVsYWphciBsdQoJZWxpZiByPT0iMyIgb3Igcj09IjAzIjogIyBTdXNjcmliZSBteSBjaG5lbmVsIDooCgkJZm9sbG93KCkJIyBCYXJ1IGJ1YXQgOikKCWVsaWYgcj09IjQiIG9yIHI9PSIwNCI6ICMgVGhua3MgYnVhdCBsdSB5ZyB1ZGgKCQlyYW5kb21fbnVtYmVycygpICMgU3VzY3JpYmUgY2hlbmVsIGd1ZSAhCgllbGlmIHI9PSI1IiBvciByPT0iMDUiOgoJCXJhbmRvbV9lbWFpbCgpCgllbGlmIHI9PSI2IiBvciByPT0iMDYiOgoJCWNla19vcHNpKCkKCWVsaWYgcj09IjciIG9yIHI9PSIwNyI6CgkJZXJvcigpCgllbGlmIHI9PSI4IiBvciByPT0iMDgiOgoJCXVzZXJhZ2VudCgpCgllbGlmIHI9PSIwIiBvciByPT0iMDAiOgoJCXRyeToKCQkJb3Muc3lzdGVtKCJybSAtcmYgbG9naW4udHh0IikKCQkJamFsYW4oIlshXSBUb2tlbiB0ZWxhaCB0ZXJoYXB1cyIpCgkJCWV4aXQoKQoJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQkJcHJpbnQoKCIgWyFdIEVycm9yICVzIiVlKSkKCWVsc2U6CgkJcHJpbnQoKCJcbiBbIV0gV3JvbmcgSW5wdXQiKSkKCQltZW51KCkKCiMjIyBNRU5VIFBJTElIIE1FVEhPREUKZGVmIHBpbGloY3JhY2soZmlsZSk6CiAgcHJpbnQoIiAgIikKICBwcmludCgoIlshXSBTZWxlY3QgbWV0aG9kZSBjcmFjayIpKQogIGphbGFuKCgiWzFdIENyYWNrIFdpdGggQXBpLkZhY2Vib29rIikpCiAgamFsYW4oKCJbMl0gQ3JhY2sgV2l0aCBBcGkuRmFjZWJvb2sgKyBUVEwgIikpCiAgamFsYW4oKCJbM10gQ3JhY2sgV2l0aCBNYmFzaWMuRmFjZWJvb2siKSkKICBqYWxhbigoIls0XSBDcmFjayBXaXRoIE1iYXNpYy5GYWNlYm9vayArIFRUTCIpKQogIGphbGFuKCgiWzBdIEJhbGlrIGtlIG1lbnUgIikpCiAgZGloaT1pbnB1dChwKyJcbls/XSBDaG9vc2UgOiAiKQogIGlmIGRpaGkgaW5bIiJdOgogICAgcHJpbnQoKCJbIV0gRmlsbCBJbiBUaGUgQ29ycmVjdCIpKQogICAgcGlsaWhjcmFjayhmaWxlKQogIGVsaWYgZGloaSBpblsiMSIsIjAxIl06CiAgICBiYXBpKGZpbGUpCiAgZWxpZiBkaWhpIGluWyIyIiwiMDIiXToKICAgIGJhcGl0dGwoZmlsZSkKICBlbGlmIGRpaGkgaW5bIjMiLCIwMyJdOgogICAgY3JhY2soZmlsZSkKICBlbGlmIGRpaGkgaW5bIjQiLCIwNCJdOgogICAgY3JhY2t0dGwoZmlsZSkKICBlbGlmIGRpaGkgaW5bIjAiLCIwMCJdOgogICAgbWVudSgpCiAgZWxzZToKICAgIHByaW50KCgiWyFdICBGaWxsIEluIFRoZSBDb3JyZWN0IikpCiAgICBwaWxpaGNyYWNrKGZpbGUpCgojIyBDUkFDSyBQVUJMSUsvVEVNQU4KZGVmIHB1YmxpaygpOgoJdHJ5OgoJCXRva2V0PW9wZW4oImxvZ2luLnR4dCIsInIiKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCWphbGFuKCgiXG4gWyFdIENvb2tpZS9Ub2tlbiBJbnZhbGlkIikpCgkJb3Muc3lzdGVtKCJybSAtcmYgbG9naW4udHh0IikKCQlsb2dzKCkKCXRyeToKCQlqYWxhbigoIlxuWz9dIEtldGlrIG1lIER1bXAgRnJvbSBGcmllbmRsaXN0IikpCgkJaWR0ID0gaW5wdXQoIlshXSBVc2VyIElEIFRhcmdldDogIikKCQl0cnk6CgkJCWpvayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKCQkJb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQoJCQlwcmludCgoIlshXSBOYW1lOiAiK29wWyJuYW1lIl0pKQoJCWV4Y2VwdCBLZXlFcnJvcjoKCQkJamFsYW4oKCJbIV0gSUQgTm90IEZvdW5kIikpCgkJCXByaW50KCgiXG4gW0JBQ0tdIikpCgkJCW1lbnUoKQoJCXI9cmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiL2ZyaWVuZHM/bGltaXQ9MTAwMDAmYWNjZXNzX3Rva2VuPSIrdG9rZXQpCgkJaWQgPSBbXQoJCXo9anNvbi5sb2FkcyhyLnRleHQpCgkJcXEgPSAob3BbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpCgkJeXMgPSBvcGVuKHFxICwgInciKSMucmVwbGFjZSgiICIsIl8iKQoJCWZvciBhIGluIHpbImRhdGEiXToKCQkJaWQuYXBwZW5kKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKQoJCQl5cy53cml0ZShhWyJpZCJdKyI8PT4iK2FbIm5hbWUiXSsiXG4iKQoJCXlzLmNsb3NlKCkKCQlqYWxhbigoIlshXSBUb3RhbCBJRCA6ICVzIiUobGVuKGlkKSkpKQoJCXJldHVybiBwaWxpaGNyYWNrKHFxKQoJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCWV4aXQoIlxuIFshXSBFcnJvciA6ICVzIiVlKQojIyBjcmFjayBMaWtlcwpkZWYgbGlrZXJzKCk6Cgl0cnk6CgkJdG9rZXQ9b3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJcHJpbnQoKCJcbiBbIV0gQ29va2llL1Rva2VuIEludmFsaWQiKSkKCQlvcy5zeXN0ZW0oInJtIC1yZiBsb2dpbi50eHQiKQoJCWxvZ3MoKQoJdHJ5OgoJCWlkdCA9IGlucHV0KCJbIV0gSUQgUG9zdCBUYXJnZXQgOiAiKQoJCXRyeToKCQkJam9rID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCQlvcCA9IGpzb24ubG9hZHMoam9rLnRleHQpCgkJCXByaW50KCgiWyFdIE5hbWUgOiAiK29wWyJuYW1lIl0pKQoJCWV4Y2VwdCBLZXlFcnJvcjoKCQkJcHJpbnQoKCJbIV0gSUQgTm90IEZvdW5kIikpCgkJCXByaW50KCgiXG4gW0JBQ0tdIikpCgkJCW1lbnUoKQoJCXI9cmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiL2xpa2VzP2xpbWl0PTEwMDAwMCZhY2Nlc3NfdG9rZW49Iit0b2tldCkKCQlpZCA9IFtdCgkJej1qc29uLmxvYWRzKHIudGV4dCkKCQlxcSA9IChvcFsiZmlyc3RfbmFtZSJdKyIuanNvbiIpLnJlcGxhY2UoIiAiLCJfIikKCQl5cyA9IG9wZW4ocXEgLCAidyIpIy5yZXBsYWNlKCIgIiwiXyIpCgkJZm9yIGEgaW4gelsiZGF0YSJdOgoJCQlpZC5hcHBlbmQoYVsiaWQiXSsiPD0+IithWyJuYW1lIl0pCgkJCXlzLndyaXRlKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKyJcbiIpCgkJeXMuY2xvc2UoKQoJCXByaW50KCgiWyFdIFRvdGFsIElEIDogJXMiJShsZW4oaWQpKSkpCgkJcmV0dXJuIHBpbGloY3JhY2socXEpCglleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJZXhpdCgiXG4gWyFdIEVycm9yIDogJXMiJWUpCiMjIENyYWNrIGZvbG93ZXMKZGVmIGZvbGxvdygpOgoJdHJ5OgoJCXRva2V0PW9wZW4oImxvZ2luLnR4dCIsInIiKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCXByaW50KCgiXG5bIV0gQ29va2llL1Rva2VuIEludmFsaWQiKSkKCQlvcy5zeXN0ZW0oInJtIC1yZiBsb2dpbi50eHQiKQoJCWxvZ3MoKQoJdHJ5OgoJCWlkdCA9IGlucHV0KCJbIV0gRm9sbG93ZXJzIElEIFRhcmdldCA6ICIpCgkJdHJ5OgoJCQlqb2sgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCgkJCW9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKCQkJcHJpbnQoKCJbIV0gTmFtZTogIitvcFsibmFtZSJdKSkKCQlleGNlcHQgS2V5RXJyb3I6CgkJCXByaW50KCgiWyFdIElEIE5vdCBGb3VuZCIpKQoJCQlwcmludCgoIlxuIFtCQUNLXSIpKQoJCQltZW51KCkKCQlyPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIi9zdWJzY3JpYmVycz9saW1pdD0yMDAwMCZhY2Nlc3NfdG9rZW49Iit0b2tldCkKCQlpZCA9IFtdCgkJej1qc29uLmxvYWRzKHIudGV4dCkKCQlxcSA9IChvcFsiZmlyc3RfbmFtZSJdKyIuanNvbiIpLnJlcGxhY2UoIiAiLCJfIikKCQl5cyA9IG9wZW4ocXEgLCAidyIpIy5yZXBsYWNlKCIgIiwiXyIpCgkJZm9yIGEgaW4gelsiZGF0YSJdOgoJCQlpZC5hcHBlbmQoYVsiaWQiXSsiPD0+IithWyJuYW1lIl0pCgkJCXlzLndyaXRlKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKyJcbiIpCgkJeXMuY2xvc2UoKQoJCXByaW50KCgiWyFdIFRvdGFsIElEIDogJXMiJShsZW4oaWQpKSkpCgkJcmV0dXJuIHBpbGloY3JhY2socXEpCglleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJZXhpdCgiXG4gWyFdIEVycm9yIDogJXMiJWUpCiMjIyBLcmVrIE5vbWVyIHN1ISAjIyMKZGVmIHJhbmRvbV9udW1iZXJzKCk6CiAgZGF0YSA9IFtdCiAgcHJpbnQoKCJcbiBbIV0gTnVtYmVyIE11c3QgQmUgNSBEaWdpdCIpKQogIGtvZGU9c3RyKGlucHV0KCJbIV0gQ29udG9oIDogOTIwMzdcbiIrcCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIElucHV0IE51bWJlcjogIikpCiAgZXhpdCgoIlxuIFshXSBOdW1iZXIgTXVzdCBCZSA1IERpZ2l0IikpIGlmIGxlbihrb2RlKSA8IDUgZWxzZSAnJwogIGV4aXQoKCJcbiBbIV0gTnVtYmVyIE11c3QgQmUgNSBEaWdpdCIpKSBpZiBsZW4oa29kZSkgPiA1IGVsc2UgJycKICBqbWw9aW50KGlucHV0KCJbIV0gQW1vdW50IDogIikpCiAgW2RhdGEuYXBwZW5kKHsndXNlcic6IHN0cihlKSwgJ3B3Jzpbc3RyKGVbNTpdKSwgc3RyKGVbNjpdKV19KSBmb3IgZSBpbiBbc3RyKGtvZGUpKycnLmpvaW4oWyclcyclKHJhbmRpbnQoMCw5KSkgZm9yIGkgaW4gcmFuZ2UoMCw3KV0pIGZvciBlIGluIHJhbmdlKGptbCldXQogIHByaW50KHArIiBbIV0gQ3JhY2sgU3RhcnRlZCwgUGxlYXNlIFdhaXQuLi5cbiIpCiAgd2l0aCBjb25jdXJyZW50LmZ1dHVyZXMuVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTE1KSBhcyB0aDoKICAgIHt0aC5zdWJtaXQoYnJ1dGUsIHVzZXJbJ3VzZXInXSwgdXNlclsncHcnXSk6IHVzZXIgZm9yIHVzZXIgaW4gZGF0YX0KICBpbnB1dCgiXG4gW0JBQ0tdIikKICBtZW51KCkKCiMjIyBjbG9uaW5nIGltYWVsCmRlZiByYW5kb21fZW1haWwoKToKICBkYXRhID0gW10KICBuYW1hPWlucHV0KCJb4oCi4oCiXSBUYXJnZXQgTmFtZSA6ICIpCiAgZG9tYWluPWlucHV0KCJb4oCi4oCiXSBDaG9vc2UgRG9tYWluIFtHXW1haWwsIFtZXWFob28sIFtIXW90bWFpbCA6ICIpLmxvd2VyKCkuc3RyaXAoKQogIGxpc3Q9ewogICAgJ2cnOidAZ21haWwuY29tJywKICAgICd5JzonQHlhaG9vLmNvbScsCiAgICAnaCc6J0Bob3RtYWlsLmNvbScKICB9CiAgZXhpdCgoIlwwMzNbMTszN21b4oCi4oCiXSBGaWxsIEluIFRoZSBDb3JyZWN0IikpIGlmIG5vdCBkb21haW4gaW4gWydnJywneScsJ2gnXSBlbHNlICcnCiAgam1sPWludChpbnB1dCgiW+KAouKAol0gQW1vdW50IDogIikpCiAgc2V0cHc9aW5wdXQoIlvigKLigKJdIFNldCBQYXNzd29yZCA6ICIpLnNwbGl0KCcsJykKICBwcmludCgiXDAzM1sxOzM3bSBb4oCi4oCiXSBDcmFjayBTdGFydGVkLCBQbGVhc2UgV2FpdC4uLlxuIikKICBbZGF0YS5hcHBlbmQoeyd1c2VyJzogbmFtYStzdHIoZSkrbGlzdFtkb21haW5dLCAncHcnOlsoaSkgZm9yIGkgaW4gc2V0cHddfSkgZm9yIGUgaW4gcmFuZ2UoMSxqbWwrMSldCiAgd2l0aCBjb25jdXJyZW50LmZ1dHVyZXMuVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTE1KSBhcyB0aDoKICAgIHt0aC5zdWJtaXQoYnJ1dGUsIHVzZXJbJ3VzZXInXSwgdXNlclsncHcnXSk6IHVzZXIgZm9yIHVzZXIgaW4gZGF0YX0KICBpbnB1dCgiXG5cMDMzWzE7MzdtIFtCQUNLXSIpCiAgbWVudSgpCgojIyBQQVNTV09SRCAjIyMKCmRlZiBnZW5lcmF0ZSh0ZXh0KToKCXJlc3VsdHM9W10KCWdsb2JhbCBpcHMKCWZvciBuYW1lIGluIHRleHQuc3BsaXQoIjw9PiIpOgoJCWlmIGxlbihuYW1lKTwzOgoJCQljb250aW51ZQoJCWVsc2U6CgkJCW5hbWU9bmFtZS5sb3dlcigpCgkJCWlmIGxlbihuYW1lKT09MyBvciBsZW4obmFtZSk9PTQgb3IgbGVuKG5hbWUpPT01OgoJCQkJcmVzdWx0cy5hcHBlbmQobmFtZSkKCQkJCXJlc3VsdHMuYXBwZW5kKG5hbWUrIjEyMyIpCgkJCQlyZXN1bHRzLmFwcGVuZChuYW1lKyIxMjM0NTYiKQoJCQllbHNlOgoJCQkJcmVzdWx0cy5hcHBlbmQobmFtZSkKCQkJCXJlc3VsdHMuYXBwZW5kKG5hbWUrIjEyMyIpCgkJCQlyZXN1bHRzLmFwcGVuZChuYW1lKyIxMjM0NTYiKQoJCQkJcmVzdWx0cy5hcHBlbmQobmFtZSsiMTIzNDU2IikKCQkJCWlmICJpbmRvbmVzaWEiIGluIGlwczoKCQkJCQlyZXN1bHRzLmFwcGVuZCgic2F5YW5nIikKCQkJCQlyZXN1bHRzLmFwcGVuZCgiYW5qaW5nIikKCQkJCQlyZXN1bHRzLmFwcGVuZCgiYmlzbWlsbGFoIikKCQkJCQlyZXN1bHRzLmFwcGVuZCgia29udG9sIikKCQkJCQlyZXN1bHRzLmFwcGVuZCgiZnJlZWZpcmUiKQoJCQkJCXJlc3VsdHMuYXBwZW5kKCJiYW5nc2F0IikKCQkJCQlyZXN1bHRzLmFwcGVuZCgibW9iaWxlIGxlZ2VuZCIpCgkJCQkJcmVzdWx0cy5hcHBlbmQoImdhcmVuYSBmcmVlIGZpcmUiKQoJCQkJCXJlc3VsdHMuYXBwZW5kKCJwdWJnIG1vYmlsZSIpCgkJCQkJcmVzdWx0cy5hcHBlbmQoImthdGEgc2FuZGkiKQoJCQkJCXJlc3VsdHMuYXBwZW5kKCJiYWppbmdhbiIpCglyZXR1cm4gcmVzdWx0cwojIyBmYiBydXRlCmRlZiBicnV0ZSh1c2VyLCBwYXNzcyk6CiAgdHJ5OgogICAgZm9yIHB3IGluIHBhc3NzOgogICAgICBwYXJhbXM9ewogICAgICAgICdhY2Nlc3NfdG9rZW4nOiAnMzUwNjg1NTMxNzI4JTdDNjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzInLAogICAgICAgICdmb3JtYXQnOiAnSlNPTicsCiAgICAgICAgJ3Nka192ZXJzaW9uJzogJzInLAogICAgICAgICdlbWFpbCc6IHVzZXIsCiAgICAgICAgJ2xvY2FsZSc6ICdlbl9VUycsCiAgICAgICAgJ3Bhc3N3b3JkJzogcHcsCiAgICAgICAgJ3Nkayc6ICdpb3MnLAogICAgICAgICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsCiAgICAgICAgJ3NpZyc6ICczZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNicsCiAgICAgIH0KICAgICAgYXBpPSdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbicKICAgICAgcmVzcG9uc2U9cmVxdWVzdHMuZ2V0KGFwaSwgcGFyYW1zPXBhcmFtcykKICAgICAgaWYgcmUuc2VhcmNoKCcoRUFBQSlcdysnLCBzdHIocmVzcG9uc2UudGV4dCkpOgogICAgICAgIHByaW50KCdceDFiWzA7MzJtICogLS0+ICVzIOKAoiAlcyAnJShzdHIodXNlciksIHN0cihwdykpKQogICAgICAgIGJyZWFrCiAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHJlc3BvbnNlLmpzb24oKVsnZXJyb3JfbXNnJ106CiAgICAgICAgcHJpbnQoJ1x4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzICclKHN0cih1c2VyKSwgc3RyKHB3KSkpCiAgICAgICAgYnJlYWsKICBleGNlcHQ6IHBhc3MKCiMjIyBCUlVURSBDUkFDSyAjIyMKCmNsYXNzIGNyYWNrOgoJb3Muc3lzdGVtKCJjbGVhciIpCgliYW5uZXIoKQoJZGVmIF9faW5pdF9fKHNlbGYsaXNpZmlsZSk6CgkJc2VsZi5hZGE9W10KCQlzZWxmLmNwPVtdCgkJc2VsZi5rbz0wCgkJamFsYW4oKCJcbiBb4oCiXSBDcmFjayBXaXRoIFBhc3MgRGVmYXVsdC9NYW51YWwgW2QvbV0iKSkKCQl3aGlsZSBUcnVlOgoJCQlmPWlucHV0KHArIiBb4oCiXSBDaG9vc2UgOiAiKQoJCQlpZiBmPT0iIjpjb250aW51ZQoJCQllbGlmIGY9PSJtIjoKCQkJCXRyeToKCQkJCQl3aGlsZSBUcnVlOgoJCQkJCQl0cnk6CgkJCQkJCQlzZWxmLmFwaz1pc2lmaWxlCgkJCQkJCQlzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkKCQkJCQkJCWJyZWFrCgkJCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQkJCQkJCXByaW50KCgiICAgJXMiJWUpKQoJCQkJCQkJY29udGludWUKCQkJCQlzZWxmLmZsPVtdCgkJCQkJZm9yIGkgaW4gc2VsZi5mczoKCQkJCQkJdHJ5OgoJCQkJCQkJc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF19KQoJCQkJCQlleGNlcHQ6Y29udGludWUKCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQkJCQlwcmludCgoIiAgICVzIiVlKSkKCQkJCQljb250aW51ZQoJCQkJamFsYW4oKCJb4oCiXSBFeGFtcGxlIDogc2F5YW5nLGtvbnRvbCwxMjM0NTYiKSkKCQkJCXNlbGYucHdsaXN0KCkKCQkJCWJyZWFrCgkJCWVsaWYgZj09ImQiOgoJCQkJdHJ5OgoJCQkJCXdoaWxlIFRydWU6CgkJCQkJCXRyeToKCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUKCQkJCQkJCXNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQoJCQkJCQkJYnJlYWsKCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCQkJCQkJcHJpbnQoKCIgICAlcyIlZSkpCgkJCQkJCQljb250aW51ZQoJCQkJCXNlbGYuZmw9W10KCQkJCQlmb3IgaSBpbiBzZWxmLmZzOgoJCQkJCQl0cnk6CgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOmdlbmVyYXRlKGkuc3BsaXQoIjw9PiIpWzFdKX0pCgkJCQkJCWV4Y2VwdDpjb250aW51ZQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCQkJCXByaW50KCgiICAgJXMiJWUpKQoJCQkJcHJpbnQoKHArIlxuW+KAol0gU3RhcnRpbmcgYnVhdCBkb3NhIDopIitwKyJcblvigKJdIEFjY291bnQgW09LXSBTYXZlZCB0byA6IG9rLnR4dCIrcCsiXG5b4oCiXSBBY2NvdW50IFtDUF0gU2F2ZWQgdG8gOiBjcC50eHQiKSkKCQkJCVRocmVhZFBvb2woMzUpLm1hcChzZWxmLm1haW4sc2VsZi5mbCkKCQkJCW9zLnJlbW92ZShzZWxmLmFwaykKCQkJCWV4aXQoKQoJCQkJYnJlYWsKCWRlZiBwd2xpc3Qoc2VsZik6CgkJc2VsZi5wdz1pbnB1dCgiW+KAol0gUGFzc3dvcmQgTGlzdCA6ICIpLnNwbGl0KCIsIikKCQlpZiBsZW4oc2VsZi5wdykgPT0wOgoJCQlzZWxmLnB3bGlzdCgpCgkJZWxzZToKCQkJZm9yIGkgaW4gc2VsZi5mbDoKCQkJCWkudXBkYXRlKHsicHciOnNlbGYucHd9KQoJCQlwcmludCgocCsiXG5b4oCiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcblshXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuW+KAol0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpCgkJCVRocmVhZFBvb2woMzApLm1hcChzZWxmLm1haW4sc2VsZi5mbCkKCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQoJCQlleGl0KCkKCWRlZiBtYWluKHNlbGYsZmwpOgoJCXRyeToKCQkJZm9yIGkgaW4gZmwuZ2V0KCJwdyIpOgoJCQkJbG9nPW1iYXNpYyhmbC5nZXQoImlkIiksCgkJCQkJaSwiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikKCQkJCWlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOgoJCQkJCXByaW50KCgiXHJceDFiWzA7MzNtICogLS0+ICVzIOKAoiAlc1xuICAgICAgICAgICAgICAgIiUoZmwuZ2V0KCJpZCIpLGksKSkpCgkJCQkJc2VsZi5jcC5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkKCQkJCQlvcGVuKCJjcC50eHQiLCJhKyIpLndyaXRlKAoJCQkJCQkiJXMg4oCiICVzXG4iJShmbC5nZXQoImlkIiksaSkpCgkJCQkJYnJlYWsKCQkJCWVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoKCQkJCQlwcmludCgoIlxyXHgxYlswOzMybSAqIC0tPiAlcyDigKIgJXMgICAgICAgICAgICAgICAiJShmbC5nZXQoImlkIiksaSkpKQoJCQkJCXNlbGYuYWRhLmFwcGVuZCgiJXMg4oCiICVzIiUoZmwuZ2V0KCJpZCIpLGkpKQoJCQkJCW9wZW4oIm9rLnR4dCIsImErIikud3JpdGUoCgkJCQkJCSIlcyDigKIgJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkKCQkJCQlicmVhawoJCQkJZWxzZTpjb250aW51ZQoJCQkJCQoJCQlzZWxmLmtvKz0xCgkJCXByaW50KCJcclx4MWJbMDszN20gW2Rvc2FfYmVnb11ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszN21PSyA6ICVzIFx4MWJbMDszN21DUCA6ICVzXHgxYlswOzM3bSIlKHNlbGYua28sbGVuKHNlbGYuZmwpLGxlbihzZWxmLmFkYSksbGVuKHNlbGYuY3ApKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpCgkJZXhjZXB0OgoJCQlzZWxmLm1haW4oZmwpCmNsYXNzIGNyYWNrdHRsOgoJb3Muc3lzdGVtKCJjbGVhciIpCgliYW5uZXIoKQoJZGVmIF9faW5pdF9fKHNlbGYsaXNpZmlsZSk6CgkJc2VsZi5hZGE9W10KCQlzZWxmLmNwPVtdCgkJc2VsZi5rbz0wCgkJcHJpbnQoKHArIlxuIFshXSBDcmFjayBXaXRoIFBhc3MgRGVmYXVsdC9NYW51YWwgW2QvbV0iKSkKCQl3aGlsZSBUcnVlOgoJCQlmPWlucHV0KCJbP10gQ2hvb3NlIDogIikKCQkJaWYgZj09IiI6Y29udGludWUKCQkJZWxpZiBmPT0ibSI6CgkJCQl0cnk6CgkJCQkJd2hpbGUgVHJ1ZToKCQkJCQkJdHJ5OgoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpCgkJCQkJCQlicmVhawoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkKCQkJCQkJCWNvbnRpbnVlCgkJCQkJc2VsZi5mbD1bXQoJCQkJCWZvciBpIGluIHNlbGYuZnM6CgkJCQkJCXRyeToKCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdfSkKCQkJCQkJZXhjZXB0OmNvbnRpbnVlCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpCgkJCQkJY29udGludWUKCQkJCXByaW50KCgiWyFdIEV4YW1wbGUgOiBzYXlhbmcsa29udG9sLDEyMzQ1NiIpKQoJCQkJc2VsZi5wd2xpc3QoKQoJCQkJYnJlYWsKCQkJZWxpZiBmPT0iZCI6CgkJCQl0cnk6CgkJCQkJd2hpbGUgVHJ1ZToKCQkJCQkJdHJ5OgoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpCgkJCQkJCQlicmVhawoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkKCQkJCQkJCWNvbnRpbnVlCgkJCQkJc2VsZi5mbD1bXQoJCQkJCWZvciBpIGluIHNlbGYuZnM6CgkJCQkJCXRyeToKCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdLCJwdyI6Z2VuZXJhdGUoaS5zcGxpdCgiPD0+IilbMV0pfSkKCQkJCQkJZXhjZXB0OmNvbnRpbnVlCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpCgkJCQlwcmludCgoIlxuW+KAol0gQ3JhY2sgU3RhcnRlZC4uLiIrcCsiXG5b4oCiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuW+KAol0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpCgkJCQlUaHJlYWRQb29sKDM1KS5tYXAoc2VsZi5tYWluLHNlbGYuZmwpCgkJCQlvcy5yZW1vdmUoc2VsZi5hcGspCgkJCQlleGl0KCkKCQkJCWJyZWFrCglkZWYgcHdsaXN0KHNlbGYpOgoJCXNlbGYucHc9aW5wdXQocCsiIFvigKJdIFBhc3N3b3JkIExpc3QgOiAiKS5zcGxpdCgiLCIpCgkJaWYgbGVuKHNlbGYucHcpID09MDoKCQkJc2VsZi5wd2xpc3QoKQoJCWVsc2U6CgkJCWZvciBpIGluIHNlbGYuZmw6CgkJCQlpLnVwZGF0ZSh7InB3IjpzZWxmLnB3fSkKCQkJcHJpbnQoKHArIlxuW+KAol0gQ3JhY2sgU3RhcnRlZCAhISEiK3ArIlxuW+KAol0gQWNjb3VudCBbT0tdIFNhdmVkIHRvIDogb2sudHh0IitwKyJcblvigKJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQoJCQlUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5tYWluLHNlbGYuZmwpCgkJCW9zLnJlbW92ZShzZWxmLmFwaykKCQkJZXhpdCgpCglkZWYgbWFpbihzZWxmLGZsKToKCQl0cnk6CgkJCWZvciBpIGluIGZsLmdldCgicHciKToKCQkJCWxvZz1tYmFzaWMoZmwuZ2V0KCJpZCIpLAoJCQkJCWksImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIpCgkJCQlpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoKCQkJCQl0cnk6CgkJCQkJCWtlPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitmbC5nZXQoImlkIikrIj9hY2Nlc3NfdG9rZW49IitvcGVuKCJsb2dpbi50eHQiLCJyIikucmVhZCgpKQoJCQkJCQl0dD1qc29uLmxvYWRzKGtlLnRleHQpCgkJCQkJCXR0bD10dFsiYmlydGhkYXkiXQoJCQkJCWV4Y2VwdDpwYXNzCgkJCQkJcHJpbnQoIlxyXHgxYlswOzMzbSAqIC0tPiAlcyDigKIgJXMg4oCiICVzIFx4MWJbMG0gICAiJShmbC5nZXQoImlkIiksaSxzdHIodHRsKSkpCgkJCQkJc2VsZi5jcC5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkKCQkJCQlvcGVuKCJjcC50eHQiLCJhKyIpLndyaXRlKAoJCQkJCQkiJXMg4oCiICVzIOKAoiAlc1xuIiUoZmwuZ2V0KCJpZCIpLGksc3RyKHR0bCkpKQoJCQkJCWJyZWFrCgkJCQllbGlmIGxvZy5nZXQoInN0YXR1cyIpPT0ic3VjY2VzcyI6CgkJCQkJcHJpbnQoKCJcclx4MWJbMDszMm0gKiAtLT4gJXMg4oCiICVzICAgICAgICAgICAgICAgIiUoZmwuZ2V0KCJpZCIpLGkpKSkKCQkJCQlzZWxmLmFkYS5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkKCQkJCQlpZiBmbC5nZXQoImlkIikgaW4gb3Blbigib2sudHh0IikucmVhZCgpOgoJCQkJCQlicmVhawoJCQkJCWVsc2U6CgkJCQkJCW9wZW4oIm9rLnR4dCIsImErIikud3JpdGUoCgkJCQkJCSIlcyDigKIgJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkKCQkJCQlicmVhawoJCQkJZWxzZTpjb250aW51ZQoJCQkJCQoJCQlzZWxmLmtvKz0xCgkJCXByaW50KCJcclx4MWJbMDszN20gW2Rvc2FfYmVnb11ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszN21PSyA6ICVzIFx4MWJbMDszN21DUCA6ICVzXHgxYlswOzM3bSIlKHNlbGYua28sbGVuKHNlbGYuZmwpLGxlbihzZWxmLmFkYSksbGVuKHNlbGYuY3ApKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpCgkJZXhjZXB0OgoJCQlzZWxmLm1haW4oZmwpCmNsYXNzIGJhcGk6CiAgZGVmIF9faW5pdF9fKHNlbGYsaXNpZmlsZSk6CiAgICBzZWxmLnNldHB3ID0gRmFsc2UKICAgIHNlbGYub2sgPSBbXQogICAgc2VsZi5jcCA9IFtdCiAgICBzZWxmLmxvb3AgPSAwCiAgICBzZWxmLmtyYWgoaXNpZmlsZSkKICBkZWYga3JhaChzZWxmLGlzaWZpbGUpOgogICAgcHJpbnQoKCJcbls/XSBDcmFjayBXaXRoIFBhc3MgRGVmYXVsdC9NYW51YWwgW2QvbV0iKSkKICAgIHdoaWxlIFRydWU6CiAgICAgIGY9aW5wdXQoIls/XSBDaG9vc2UgOiAiKQogICAgICBpZiBmIGluWyIiLCIgIl06CiAgICAgICAgcHJpbnQoKHArIiBbIV0gSW52YWxpZCBOdW1iZXIiKSkKICAgICAgICBjb250aW51ZQogICAgICBlbGlmIGYgaW5bIm0iLCJNIl06CiAgICAgICAgdHJ5OgogICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgIHNlbGYuYXBrPWlzaWZpbGUKICAgICAgICAgICAgICBzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkKICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgcHJpbnQoKGsrIlsiK3ArIiEiK2srIl0iK3ArIiAlcyIlZSkpCiAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgIHNlbGYuZmw9W10KICAgICAgICAgIHByaW50KChwKyIgW+KAol0gRXhhbXBsZSA6IHNheWFuZyxrb250b2wsMTIzNDU2IikpCiAgICAgICAgICBzZWxmLnB3PWlucHV0KHArIiBb4oCiXSBQYXNzd29yZCBMaXN0IDogIikuc3BsaXQoIiwiKQogICAgICAgICAgaWYgbGVuKHNlbGYucHcpID09MDoKICAgICAgICAgICAgY29udGludWUKICAgICAgICAgIGZvciBpIGluIHNlbGYuZnM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICBzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOnNlbGYucHd9KQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgY29udGludWUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICBwcmludCgoIiAgJXMiJWUpKQogICAgICAgICAgY29udGludWUKICAgICAgICBwcmludCgoIlxuIFvigKJdIFN0YXJ0ZWQgYnVhdCBkb3NhIDopIitwKyJcbiBb4oCiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFvigKJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQogICAgICAgIFRocmVhZFBvb2woMzApLm1hcChzZWxmLmJydXRlLHNlbGYuZmwpCiAgICAgICAgI29zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICBleGl0KCkKICAgICAgICBicmVhawogICAgICBlbGlmIGYgaW5bImQiLCJEIl06CiAgICAgICAgdHJ5OgogICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgIHNlbGYuYXBrPWlzaWZpbGUKICAgICAgICAgICAgICBzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkKICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgcHJpbnQoZSkKICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgc2VsZi5mbD1bXQogICAgICAgICAgZm9yIGkgaW4gc2VsZi5mczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgIHNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdLCJwdyI6Z2VuZXJhdGUoaS5zcGxpdCgiPD0+IilbMV0pfSkKICAgICAgICAgICAgZXhjZXB0OmNvbnRpbnVlCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgY29udGludWUKICAgICAgICBwcmludCgocCsiXG5b4oCiXSBTdGFydGVkIGJ1YXQgZG9zYSIrcCsiXG5b4oCiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuW+KAol0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpCiAgICAgICAgVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYuYnJ1dGUsc2VsZi5mbCkKICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgZXhpdCgpCiAgICAgICAgYnJlYWsKICBkZWYgYnJ1dGVSZXF1ZXN0KHNlbGYsIHVzZXJuYW1lLCBwYXNzd29yZCk6CiAgICBnbG9iYWwgb2ssY3AsdHRsCiAgICBwYXJhbXMgPSB7ImFjY2Vzc190b2tlbiI6ICIzNTA2ODU1MzE3MjglN0M2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMiIsICAiZm9ybWF0IjogIkpTT04iLCAic2RrX3ZlcnNpb24iOiAiMiIsICJlbWFpbCI6IHVzZXJuYW1lLCAibG9jYWxlIjogImVuX1VTIiwgInBhc3N3b3JkIjogcGFzc3dvcmQsICJzZGsiOiAiaW9zIiwgImdlbmVyYXRlX3Nlc3Npb25fY29va2llcyI6ICIxIiwgInNpZyI6ICIzZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiJ9CiAgICBhcGkgPSAiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4iCiAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldChhcGksIHBhcmFtcz1wYXJhbXMpCiAgICBpZiByZS5zZWFyY2goIihFQUFBKVxcdysiLCByZXNwb25zZS50ZXh0KToKICAgICAgc2VsZi5vay5hcHBlbmQodXNlcm5hbWUgKyAiIOKAoiAiICsgcGFzc3dvcmQpCiAgICAgIHByaW50KCgiXHJceDFiWzA7MzJtICogLS0+ICVzIOKAoiAlcyAlcyAgICAgICAgICAgICAgICIlKHVzZXJuYW1lLHBhc3N3b3JkLE4pKSkKICAgICAgb2suYXBwZW5kKHVzZXJuYW1lICsgIiDigKIgIiArIHBhc3N3b3JkKQogICAgICBzYXZlID0gb3Blbigib2sudHh0IiwgImEiKQogICAgICBzYXZlLndyaXRlKHN0cih1c2VybmFtZSkgKyAiIOKAoiAiICsgc3RyKHBhc3N3b3JkKSArICJcbiIpCiAgICAgIHNhdmUuY2xvc2UoKQogICAgICByZXR1cm4gVHJ1ZQogICAgZWxzZToKICAgICAgaWYgInd3dy5mYWNlYm9vay5jb20iIGluIHJlc3BvbnNlLmpzb24oKVsiZXJyb3JfbXNnIl06CiAgICAgICAgc2VsZi5jcC5hcHBlbmQodXNlcm5hbWUgKyAiIOKAoiAiICsgcGFzc3dvcmQpCiAgICAgICAgcHJpbnQoKCJcclx4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzICVzICAgICAgICAgICAgICAgIiUodXNlcm5hbWUscGFzc3dvcmQsTikpKQogICAgICAgIHNhdmUgPSBvcGVuKCJjcC50eHQiLCAiYSsiKQogICAgICAgIHNhdmUud3JpdGUoc3RyKHVzZXJuYW1lKSArICIg4oCiICIgKyBzdHIocGFzc3dvcmQpICsgIlxuIikKICAgICAgICBzYXZlLmNsb3NlKCkKICAgICAgICByZXR1cm4gVHJ1ZQogICAgcmV0dXJuIEZhbHNlCiAgZGVmIGJydXRlKHNlbGYsIGZsKToKICAgIGlmIHNlbGYuc2V0cHcgPT0gRmFsc2U6CiAgICAgIHNlbGYubG9vcCArPSAxCiAgICAgIGZvciBwdyBpbiBmbFsicHciXToKICAgICAgICB1c2VybmFtZSA9IGZsWyJpZCJdLmxvd2VyKCkKICAgICAgICBwYXNzd29yZCA9IHB3Lmxvd2VyKCkKICAgICAgICB0cnk6CiAgICAgICAgICBpZiBzZWxmLmJydXRlUmVxdWVzdCh1c2VybmFtZSwgcGFzc3dvcmQpID09IFRydWU6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgY29udGludWUKICAgICAgICBwcmludCgoIlxyXHgxYlswOzM3bSBbQ3JhY2tdXHgxYlswOzM3bSAlcy8lcyBceDFiWzA7MzdtT0sgOiAlcyBceDFiWzA7MzdtQ1AgOiAlc1x4MWJbMDszN20iJShzZWxmLmxvb3AsbGVuKHNlbGYuZmwpLGxlbihzZWxmLm9rKSxsZW4oc2VsZi5jcCkpKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpCiAgICBlbHNlOgogICAgICBzZWxmLmxvb3AgKz0gMQogICAgICBmb3IgcHcgaW4gc2VsZi5zZXRwdzoKICAgICAgICB1c2VybmFtZSA9IHVzZXJzWyJpZCJdLmxvd2VyKCkKICAgICAgICBwYXNzd29yZCA9IHB3Lmxvd2VyKCkKICAgICAgICB0cnk6CiAgICAgICAgICBpZiBzZWxmLmJydXRlUmVxdWVzdCh1c2VybmFtZSwgcGFzc3dvcmQpID09IFRydWU6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgY29udGludWUKICAgICAgICBwcmludCgoIlxyXHgxYlswOzM3bSBbQ3JhY2tdXHgxYlswOzM3bSAlcy8lcyBceDFiWzA7MzdtT0sgOiAlcyBceDFiWzA7MzdtQ1AgOiAlc1x4MWJbMDszN20iJShzZWxmLmxvb3AsbGVuKHNlbGYuZmwpLGxlbihzZWxmLm9rKSxsZW4oc2VsZi5jcCkpKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpCgpjbGFzcyBiYXBpdHRsOgogIGRlZiBfX2luaXRfXyhzZWxmLGlzaWZpbGUpOgogICAgc2VsZi5zZXRwdyA9IEZhbHNlCiAgICBzZWxmLm9rID0gW10KICAgIHNlbGYuY3AgPSBbXQogICAgc2VsZi5sb29wID0gMAogICAgc2VsZi5rcmFoKGlzaWZpbGUpCiAgZGVmIGtyYWgoc2VsZixpc2lmaWxlKToKICAgIHByaW50KChwKyJcbiBb4oCiXSBDcmFjayBXaXRoIFBhc3MgRGVmYXVsdC9NYW51YWwgW2QvbV0iKSkKICAgIHdoaWxlIFRydWU6CiAgICAgIGY9aW5wdXQocCsiIFvigKJdIENob29zZSA6ICIpCiAgICAgIGlmIGYgaW5bIiIsIiAiXToKICAgICAgICBwcmludCgocCsiIFvigKJdIEludmFsaWQgTnVtYmVyIikpCiAgICAgICAgY29udGludWUKICAgICAgZWxpZiBmIGluWyJtIiwiTSJdOgogICAgICAgIHRyeToKICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICBzZWxmLmFwaz1pc2lmaWxlCiAgICAgICAgICAgICAgc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpCiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgIHByaW50KChrKyJbIitwKyIhIitrKyJdIitwKyIgJXMiJWUpKQogICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICBzZWxmLmZsPVtdCiAgICAgICAgICBwcmludCgocCsiIFvigKJdIEV4YW1wbGUgOiBzYXlhbmcsa29udG9sLDEyMzQ1NiIpKQogICAgICAgICAgc2VsZi5wdz1pbnB1dChwKyIgW+KAol0gUGFzc3dvcmQgTGlzdCA6ICIpLnNwbGl0KCIsIikKICAgICAgICAgIGlmIGxlbihzZWxmLnB3KSA9PTA6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF0sInB3IjpzZWxmLnB3fSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgcHJpbnQoKCIgICVzIiVlKSkKICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgcHJpbnQoKHArIlxuIFvigKJdIENyYWNrIFN0YXJ0ZWQuLi4iK3ArIlxuIFvigKJdIEFjY291bnQgW09LXSBTYXZlZCB0byA6IG9rLnR4dCIrcCsiXG4gW+KAol0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpCiAgICAgICAgVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYuYnJ1dGUsc2VsZi5mbCkKICAgICAgICAjb3MucmVtb3ZlKHNlbGYuYXBrKQogICAgICAgIGV4aXQoKQogICAgICAgIGJyZWFrCiAgICAgIGVsaWYgZiBpblsiZCIsIkQiXToKICAgICAgICB0cnk6CiAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgc2VsZi5hcGs9aXNpZmlsZQogICAgICAgICAgICAgIHNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICBwcmludChlKQogICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICBzZWxmLmZsPVtdCiAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF0sInB3IjpnZW5lcmF0ZShpLnNwbGl0KCI8PT4iKVsxXSl9KQogICAgICAgICAgICBleGNlcHQ6Y29udGludWUKICAgICAgICBleGNlcHQ6CiAgICAgICAgICBjb250aW51ZQogICAgICAgIHByaW50KChwKyJcbiBb4oCiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBb4oCiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFvigKJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQogICAgICAgIFRocmVhZFBvb2woMzApLm1hcChzZWxmLmJydXRlLHNlbGYuZmwpCiAgICAgICAgb3MucmVtb3ZlKHNlbGYuYXBrKQogICAgICAgIGV4aXQoKQogICAgICAgIGJyZWFrCiAgZGVmIGJydXRlUmVxdWVzdChzZWxmLCB1c2VybmFtZSwgcGFzc3dvcmQpOgogICAgZ2xvYmFsIG9rLGNwLHR0bAogICAgcGFyYW1zID0geyJhY2Nlc3NfdG9rZW4iOiAiMzUwNjg1NTMxNzI4JTdDNjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzIiLCAgImZvcm1hdCI6ICJKU09OIiwgInNka192ZXJzaW9uIjogIjIiLCAiZW1haWwiOiB1c2VybmFtZSwgImxvY2FsZSI6ICJlbl9VUyIsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAic2RrIjogImlvcyIsICJnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMiOiAiMSIsICJzaWciOiAiM2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYifQogICAgYXBpID0gImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luIgogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoYXBpLCBwYXJhbXM9cGFyYW1zKQogICAgaWYgcmUuc2VhcmNoKCIoRUFBQSlcXHcrIiwgcmVzcG9uc2UudGV4dCk6CiAgICAgIHNlbGYub2suYXBwZW5kKHVzZXJuYW1lICsgIiDigKIgIiArIHBhc3N3b3JkKQogICAgICBwcmludCgoIlxyXHgxYlswOzMybSAqIC0tPiAlcyDigKIgJXMgJXMgICAgICAgICAgICAgICAiJSh1c2VybmFtZSxwYXNzd29yZCxOKSkpCiAgICAgIG9rLmFwcGVuZCh1c2VybmFtZSArICIg4oCiICIgKyBwYXNzd29yZCkKICAgICAgc2F2ZSA9IG9wZW4oIm9rLnR4dCIsICJhIikKICAgICAgc2F2ZS53cml0ZShzdHIodXNlcm5hbWUpICsgIiDigKIgIiArIHN0cihwYXNzd29yZCkgKyAiXG4iKQogICAgICBzYXZlLmNsb3NlKCkKICAgICAgcmV0dXJuIFRydWUKICAgIGVsc2U6CiAgICAgIGlmICJ3d3cuZmFjZWJvb2suY29tIiBpbiByZXNwb25zZS5qc29uKClbImVycm9yX21zZyJdOgogICAgICAgIHRyeToKICAgICAgICAgIGtlPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitzdHIodXNlcm5hbWUpKyI/YWNjZXNzX3Rva2VuPSIrb3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKSkKICAgICAgICAgIHR0PWpzb24ubG9hZHMoa2UudGV4dCkKICAgICAgICAgIHR0bD10dFsiYmlydGhkYXkiXQogICAgICAgIGV4Y2VwdDpwYXNzCiAgICAgICAgc2VsZi5jcC5hcHBlbmQodXNlcm5hbWUgKyAiIOKAoiAiICsgcGFzc3dvcmQgKyAiIOKAoiAiICsgdHRsKQogICAgICAgIHByaW50KCJcclx4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzIOKAoiAlcyAgICIlKHVzZXJuYW1lLHBhc3N3b3JkLHR0bCkpCiAgICAgICAgc2F2ZSA9IG9wZW4oImNwLnR4dCIsICJhKyIpCiAgICAgICAgc2F2ZS53cml0ZShzdHIodXNlcm5hbWUpICsgIiDigKIgIiArIHN0cihwYXNzd29yZCkgKyAiIOKAoiAiKyBzdHIodHRsKSsiXG4iKQogICAgICAgIHNhdmUuY2xvc2UoKQogICAgICAgIHJldHVybiBUcnVlCiAgICByZXR1cm4gRmFsc2UKICBkZWYgYnJ1dGUoc2VsZiwgZmwpOgogICAgaWYgc2VsZi5zZXRwdyA9PSBGYWxzZToKICAgICAgc2VsZi5sb29wICs9IDEKICAgICAgZm9yIHB3IGluIGZsWyJwdyJdOgogICAgICAgIHVzZXJuYW1lID0gZmxbImlkIl0ubG93ZXIoKQogICAgICAgIHBhc3N3b3JkID0gcHcubG93ZXIoKQogICAgICAgIHRyeToKICAgICAgICAgIGlmIHNlbGYuYnJ1dGVSZXF1ZXN0KHVzZXJuYW1lLCBwYXNzd29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAgYnJlYWsKICAgICAgICBleGNlcHQ6CiAgICAgICAgICBjb250aW51ZQogICAgICAgIHByaW50KCgiXHJceDFiWzA7MzdtIFtDcmFja11ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszN21PSyA6ICVzIFx4MWJbMDszN21DUCA6ICVzXHgxYlswOzM3bSIlKHNlbGYubG9vcCxsZW4oc2VsZi5mbCksbGVuKHNlbGYub2spLGxlbihzZWxmLmNwKSkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkKICAgIGVsc2U6CiAgICAgIHNlbGYubG9vcCArPSAxCiAgICAgIGZvciBwdyBpbiBzZWxmLnNldHB3OgogICAgICAgIHVzZXJuYW1lID0gdXNlcnNbImlkIl0ubG93ZXIoKQogICAgICAgIHBhc3N3b3JkID0gcHcubG93ZXIoKQogICAgICAgIHRyeToKICAgICAgICAgIGlmIHNlbGYuYnJ1dGVSZXF1ZXN0KHVzZXJuYW1lLCBwYXNzd29yZCkgPT0gVHJ1ZToKICAgICAgICAgICAgYnJlYWsKICAgICAgICBleGNlcHQ6CiAgICAgICAgICBjb250aW51ZQogICAgICAgIHByaW50KCgiXHJceDFiWzA7MzdtIFtDcmFja11ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszN21PSyA6ICVzIFx4MWJbMDszN21DUCA6ICVzXHgxYlswOzM3bSIlKHNlbGYubG9vcCxsZW4oc2VsZi5mbCksbGVuKHNlbGYub2spLGxlbihzZWxmLmNwKSkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkKCmNsYXNzIGNyYWNrdHRsOgoJb3Muc3lzdGVtKCJjbGVhciIpCgliYW5uZXIoKQoJZGVmIF9faW5pdF9fKHNlbGYsaXNpZmlsZSk6CgkJc2VsZi5hZGE9W10KCQlzZWxmLmNwPVtdCgkJc2VsZi5rbz0wCgkJcHJpbnQoKHArIlxuIFvigKJdIENyYWNrIFdpdGggUGFzcyBEZWZhdWx0L01hbnVhbCBbZC9tXSIpKQoJCXdoaWxlIFRydWU6CgkJCWY9aW5wdXQocCsiIFvigKJdIENob29zZSA6ICIpCgkJCWlmIGY9PSIiOmNvbnRpbnVlCgkJCWVsaWYgZj09Im0iOgoJCQkJdHJ5OgoJCQkJCXdoaWxlIFRydWU6CgkJCQkJCXRyeToKCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUKCQkJCQkJCXNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQoJCQkJCQkJYnJlYWsKCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCQkJCQkJcHJpbnQoKCIgICAlcyIlZSkpCgkJCQkJCQljb250aW51ZQoJCQkJCXNlbGYuZmw9W10KCQkJCQlmb3IgaSBpbiBzZWxmLmZzOgoJCQkJCQl0cnk6CgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXX0pCgkJCQkJCWV4Y2VwdDpjb250aW51ZQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCQkJCXByaW50KCgiICAgJXMiJWUpKQoJCQkJCWNvbnRpbnVlCgkJCQlwcmludCgocCsiIFvigKJdIEV4YW1wbGUgOiBzYXlhbmcsa29udG9sLDEyMzQ1NiIpKQoJCQkJc2VsZi5wd2xpc3QoKQoJCQkJYnJlYWsKCQkJZWxpZiBmPT0iZCI6CgkJCQl0cnk6CgkJCQkJd2hpbGUgVHJ1ZToKCQkJCQkJdHJ5OgoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpCgkJCQkJCQlicmVhawoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkKCQkJCQkJCWNvbnRpbnVlCgkJCQkJc2VsZi5mbD1bXQoJCQkJCWZvciBpIGluIHNlbGYuZnM6CgkJCQkJCXRyeToKCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdLCJwdyI6Z2VuZXJhdGUoaS5zcGxpdCgiPD0+IilbMV0pfSkKCQkJCQkJZXhjZXB0OmNvbnRpbnVlCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpCgkJCQlwcmludCgocCsiXG4gW+KAol0gQ3JhY2sgU3RhcnRlZC4uLiIrcCsiXG4gW+KAol0gQWNjb3VudCBbT0tdIFNhdmVkIHRvIDogb2sudHh0IitwKyJcbiBb4oCiXSBBY2NvdW50IFtDUF0gU2F2ZWQgdG8gOiBjcC50eHQiKSkKCQkJCVRocmVhZFBvb2woMzUpLm1hcChzZWxmLm1haW4sc2VsZi5mbCkKCQkJCW9zLnJlbW92ZShzZWxmLmFwaykKCQkJCWV4aXQoKQoJCQkJYnJlYWsKCWRlZiBwd2xpc3Qoc2VsZik6CgkJc2VsZi5wdz1pbnB1dChwKyIgW+KAol0gUGFzc3dvcmQgTGlzdCA6ICIpLnNwbGl0KCIsIikKCQlpZiBsZW4oc2VsZi5wdykgPT0wOgoJCQlzZWxmLnB3bGlzdCgpCgkJZWxzZToKCQkJZm9yIGkgaW4gc2VsZi5mbDoKCQkJCWkudXBkYXRlKHsicHciOnNlbGYucHd9KQoJCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgU3RhcnRlZC4uLiIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbT0tdIFNhdmVkIHRvIDogb2sudHh0IitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtDUF0gU2F2ZWQgdG8gOiBjcC50eHQiKSkKCQkJVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYubWFpbixzZWxmLmZsKQoJCQlvcy5yZW1vdmUoc2VsZi5hcGspCgkJCWV4aXQoKQoJZGVmIG1haW4oc2VsZixmbCk6CgkJdHJ5OgoJCQlmb3IgaSBpbiBmbC5nZXQoInB3Iik6CgkJCQlsb2c9bWJhc2ljKGZsLmdldCgiaWQiKSwKCQkJCQlpLCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iKQoJCQkJaWYgbG9nLmdldCgic3RhdHVzIik9PSJjcCI6CgkJCQkJdHJ5OgoJCQkJCQlrZT1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrZmwuZ2V0KCJpZCIpKyI/YWNjZXNzX3Rva2VuPSIrb3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKSkKCQkJCQkJdHQ9anNvbi5sb2FkcyhrZS50ZXh0KQoJCQkJCQl0dGw9dHRbImJpcnRoZGF5Il0KCQkJCQlleGNlcHQ6cGFzcwoJCQkJCXByaW50KCJcclx4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzIOKAoiAlcyBceDFiWzBtICAgIiUoZmwuZ2V0KCJpZCIpLGksc3RyKHR0bCkpKQoJCQkJCXNlbGYuY3AuYXBwZW5kKCIlcyDigKIgJXMiJShmbC5nZXQoImlkIiksaSkpCgkJCQkJb3BlbigiY3AudHh0IiwiYSsiKS53cml0ZSgKCQkJCQkJIiVzIOKAoiAlcyDigKIgJXNcbiIlKGZsLmdldCgiaWQiKSxpLHN0cih0dGwpKSkKCQkJCQlicmVhawoJCQkJZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOgoJCQkJCXByaW50KCgiXHJceDFiWzA7MzJtICogLS0+ICVzIOKAoiAlcyAgICAgICAgICAgICAgICIlKGZsLmdldCgiaWQiKSxpKSkpCgkJCQkJc2VsZi5hZGEuYXBwZW5kKCIlcyDigKIgJXMiJShmbC5nZXQoImlkIiksaSkpCgkJCQkJaWYgZmwuZ2V0KCJpZCIpIGluIG9wZW4oIm9rLnR4dCIpLnJlYWQoKToKCQkJCQkJYnJlYWsKCQkJCQllbHNlOgoJCQkJCQlvcGVuKCJvay50eHQiLCJhKyIpLndyaXRlKAoJCQkJCQkiJXMg4oCiICVzXG4iJShmbC5nZXQoImlkIiksaSkpCgkJCQkJYnJlYWsKCQkJCWVsc2U6Y29udGludWUKCQkJCQkKCQkJc2VsZi5rbys9MQoJCQlwcmludCgiXHJceDFiWzA7MzdtIFtDcmFja11ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszN21PSyA6ICVzIFx4MWJbMDszN21DUCA6ICVzXHgxYlswOzM3bSIlKHNlbGYua28sbGVuKHNlbGYuZmwpLGxlbihzZWxmLmFkYSksbGVuKHNlbGYuY3ApKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpCgkJZXhjZXB0OgoJCQlzZWxmLm1haW4oZmwpCiMjIFJlc3VsdCBIYXNpbGwgIyMjIwpkZWYgY2VrX29wc2koKToKCXByaW50KChwKyJcbiBb4oCi4oCiXSBNYXN1a2FuIEZpbGUgY3AudHh0IikpCglwcmludCgoIiBb4oCi4oCiXSBDb250b2ggOiBjcC50eHQvb2sudHh0IikpCglmaWxlcyA9IGlucHV0KHArIiBb4oCi4oCiXSBGaWxlOiAiKQoJaWYgZmlsZXMgPT0gIiI6CgkJY2VrX29wc2koKQoJdHJ5OgoJCWJ1a2FfYmFqdSA9IG9wZW4oZmlsZXMsICJyIikucmVhZGxpbmVzKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCWV4aXQocCsiIFvigKLigKJdIEZpbGVzICVzJXMlcyBUaWRhayBBZGEhIiUoaCxmaWxlcyxwKSkKCXByaW50KHArIiBb4oCi4oCiXSBUb3RhbCBBY2NvdW50IENwIDogIitzdHIobGVuKGJ1a2FfYmFqdSkpKQoJcHJpbnQocCsiIFvigKLigKJdIENoZWNrIE9wc2kgQ2hlY2twb2ludCwgUGxlYXNlIFdhaXQuLi4iKQoJZm9yIG1lbWVrIGluIGJ1a2FfYmFqdToKCQlrb250b2wgPSBtZW1lay5yZXBsYWNlKCJcbiIsIiIpCgkJdGl0aWQgID0ga29udG9sLnNwbGl0KCLigKIiKQoJCXByaW50KCJb4oCi4oCiXSAiK2tvbnRvbC5yZXBsYWNlKCIgKyAiLCIiKSkKCQl0cnk6CgkJCWNoZWNrX2luKHRpdGlkWzBdLnJlcGxhY2UoIiArICIsIiIpLCB0aXRpZFsxXSkKCQlleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CgkJCXBhc3MKCWlucHV0KCIlcyBbQkFDS10iJShwKSkKCW1lbnUoKQoKZGVmIGNoZWNrX2luKHVzZXIsIHBhc3cpOgoJbWIgPSAoImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20iKQoJdWEgPSAoIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA0LjEuMjsgTm9raWFfWCBCdWlsZC9KWk81NEspIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8zMC4wLjE1OTkuODIgTW9iaWxlIFNhZmFyaS81MzcuMzYgTm9raWFCcm93c2VyLzEuMi4wLjEyIikKCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQoJc2VzLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6ICJtLmZhY2Vib29rLmNvbSIsImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwib3JpZ2luIjogbWIsImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCJ1c2VyLWFnZW50IjogdWEsImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwieC1yZXF1ZXN0ZWQtd2l0aCI6ICJtYXJrLnZpYS5ncCIsInNlYy1mZXRjaC1zaXRlIjogInNhbWUtb3JpZ2luIiwic2VjLWZldGNoLW1vZGUiOiAibmF2aWdhdGUiLCJzZWMtZmV0Y2gtdXNlciI6ICI/MSIsInNlYy1mZXRjaC1kZXN0IjogImRvY3VtZW50IiwicmVmZXJlciI6IG1iKyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLCJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkKCWRhdGEgPSB7fQoJZ2VkID0gcGFyc2VyKHNlcy5nZXQobWIrIi9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCBoZWFkZXJzPXsidXNlci1hZ2VudCI6dWF9KS50ZXh0LCAiaHRtbC5wYXJzZXIiKQoJZm0gPSBnZWQuZmluZCgiZm9ybSIseyJtZXRob2QiOiJwb3N0In0pCglsaXN0ID0gWyJsc2QiLCJqYXpvZXN0IiwibV90cyIsImxpIiwidHJ5X251bWJlciIsInVucmVjb2duaXplZF90cmllcyIsImxvZ2luIiwiYmlfeHJ3aCJdCglmb3IgaSBpbiBmbS5maW5kX2FsbCgiaW5wdXQiKToKCQlpZiBpLmdldCgibmFtZSIpIGluIGxpc3Q6CgkJCWRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkKCQllbHNlOgoJCQljb250aW51ZQoJZGF0YS51cGRhdGUoeyJlbWFpbCI6dXNlciwicGFzcyI6cGFzd30pCglydW4gPSBwYXJzZXIoc2VzLnBvc3QobWIrZm0uZ2V0KCJhY3Rpb24iKSwgZGF0YT1kYXRhLCBhbGxvd19yZWRpcmVjdHM9VHJ1ZSkudGV4dCwgImh0bWwucGFyc2VyIikKCWlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llczoKCQlmb3JtID0gcnVuLmZpbmQoImZvcm0iKQoJCWR0c2cgPSBmb3JtLmZpbmQoImlucHV0Iix7Im5hbWUiOiJmYl9kdHNnIn0pWyJ2YWx1ZSJdCgkJanpzdCA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Imphem9lc3QifSlbInZhbHVlIl0KCQluaCAgID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoibmgifSlbInZhbHVlIl0KCQlkYXRhRCA9IHsiZmJfZHRzZyI6IGR0c2csImZiX2R0c2ciOiBkdHNnLCJqYXpvZXN0IjoganpzdCwiamF6b2VzdCI6IGp6c3QsImNoZWNrcG9pbnRfZGF0YSI6IiIsInN1Ym1pdFtDb250aW51ZV0iOiJMYW5qdXRrYW4iLCJuaCI6IG5ofQoJCXhueHggPSBwYXJzZXIoc2VzLnBvc3QobWIrZm9ybVsiYWN0aW9uIl0sIGRhdGE9ZGF0YUQpLnRleHQsICJodG1sLnBhcnNlciIpCgkJbmdldyA9IFt5eS50ZXh0IGZvciB5eSBpbiB4bnh4LmZpbmRfYWxsKCJvcHRpb24iKV0KCQlwcmludChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gVG90YWwgT3BzaSBZYW5nIFRlcnNlZGlhICIrc3RyKGxlbihuZ2V3KSkpCgkJZm9yIG9wdCBpbiByYW5nZShsZW4obmdldykpOgoJCQlwcmludCgiICAgIitzdHIob3B0KzEpKyIgIituZ2V3W29wdF0pCgllbGlmICJsb2dpbl9lcnJvciIgaW4gc3RyKHJ1bik6CgkJb2ggPSBydW4uZmluZCgiZGl2Iix7ImlkIjoibG9naW5fZXJyb3IifSkuZmluZCgiZGl2IikudGV4dAoJCXByaW50KHArIiBb4oCi4oCiXSAlcyIlKG9oKSkKCWVsc2U6CgkJcHJpbnQocCsiIFvigKLigKJdIExvZ2luIEdhZ2FsLCBJRC9QYXNzIFNhbGFoXG4iKQoKaWYgX19uYW1lX189PSJfX21haW5fXyI6Cglvcy5zeXN0ZW0oJ2dpdCBwdWxsJykKCW1lbnUoKQoKIyBTVUhVIFNVSFUgS09LIFJFS0FPREUKIyBBV09LwrIgOikKIyBCWSA6IERJSEkgWENSQUNLCiMgU1VTQ1JJQkUgQ0hFTkVMIEdVRSBTVUhVCg=='))
